<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Master's Data</title>
    <link rel="stylesheet" href="./style.css" />
    <!-- <link rel="icon" href="./favicon.ico" type="image/x-icon" /> -->
    <script src="https://d3js.org/d3.v5.min.js"></script>

    <style>
      #chart {
        background-color: white;
        width: min-content;
      }
      .tooltip {
        position: absolute;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        pointer-events: none;
      }
      .tooltip2 {
        position: absolute;
        background-color: white;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
        pointer-events: none;
      }
      #chart2 {
        margin-top: 100px;
        background-color: white;
        width: min-content;
      }

      #chart3 {
        margin-top: 100px;
        background-color: white;
        width: min-content;
      }
    </style>
  </head>

  <body>
    <main>
      <h1 style="font-style: italic">Old Masters v New Masters</h1>
      <p style="color: white">
        Data sourced from
        <a href="https://www.pgatour.com/stats" style="color: #f1373d"
          >PGA Tour</a
        >
      </p>
      <div id="chart"></div>

      <p style="color: white; font-size: larger; width: 50%">
        This chart visualizes the change in farthest annual drive over the
        course of 30 years. There is a clear trend upwards since 1993, which
        could either be the doing of better technology (improved club design),
        and or newer, better studied techniques.
      </p>
      <div id="chart2"></div>
      <p style="color: white; font-size: larger; width: 50%">
        This chart visualizes the change in highest accuracy among golfers
        annualy. Accuracy is measured by percentage of fairways hit. Unlike the
        previous graph, this variable seems to decrease over time, however there
        it is not very linear.
      </p>
      <div
        class="tableauPlaceholder"
        id="viz1713925106173"
        style="
          position: relative;
          margin: 0 auto;
          margin-top: 50px;
          margin-bottom: 50px;
        "
      >
        <noscript
          ><a href="#"
            ><img
              alt="Weeks Spent as the #1 Ranked Golfer vs. Number of Major Victories "
              src="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;We&#47;WeeksRanked&#47;Sheet1&#47;1_rss.png"
              style="border: none" /></a></noscript
        ><object class="tableauViz" style="display: none">
          <param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F" />
          <param name="embed_code_version" value="3" />
          <param name="site_root" value="" />
          <param name="name" value="WeeksRanked&#47;Sheet1" />
          <param name="tabs" value="no" />
          <param name="toolbar" value="yes" />
          <param
            name="static_image"
            value="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;We&#47;WeeksRanked&#47;Sheet1&#47;1.png"
          />
          <param name="animate_transition" value="yes" />
          <param name="display_static_image" value="yes" />
          <param name="display_spinner" value="yes" />
          <param name="display_overlay" value="yes" />
          <param name="display_count" value="yes" />
          <param name="language" value="en-US" />
          <param name="filter" value="publish=yes" />
        </object>
      </div>
      <script type="text/javascript">
        var divElement = document.getElementById("viz1713925106173");
        var vizElement = divElement.getElementsByTagName("object")[0];
        vizElement.style.width = "100%";
        vizElement.style.height = 700 + "px";
        var scriptElement = document.createElement("script");
        scriptElement.src =
          "https://public.tableau.com/javascripts/api/viz_v1.js";
        vizElement.parentNode.insertBefore(scriptElement, vizElement);
      </script>
      <p style="color: white; font-size: larger; width: 50%">
        This chart shows golfers among different eras, and compares their number
        of weeks ranked #1, and how many majors they actually won. Besides a few
        outliers, the competition has stayed relatively balanced.
      </p>

      <div
        class="tableauPlaceholder"
        id="viz1713929986552"
        style="position: relative; margin: 0 auto; margin-top: 50px"
      >
        <noscript
          ><a href="#"
            ><img
              alt="Most PGA Tour Wins "
              src="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Mo&#47;MostPGATourWins&#47;Sheet1&#47;1_rss.png"
              style="border: none" /></a></noscript
        ><object class="tableauViz" style="display: none">
          <param name="host_url" value="https%3A%2F%2Fpublic.tableau.com%2F" />
          <param name="embed_code_version" value="3" />
          <param name="site_root" value="" />
          <param name="name" value="MostPGATourWins&#47;Sheet1" />
          <param name="tabs" value="no" />
          <param name="toolbar" value="yes" />
          <param
            name="static_image"
            value="https:&#47;&#47;public.tableau.com&#47;static&#47;images&#47;Mo&#47;MostPGATourWins&#47;Sheet1&#47;1.png"
          />
          <param name="animate_transition" value="yes" />
          <param name="display_static_image" value="yes" />
          <param name="display_spinner" value="yes" />
          <param name="display_overlay" value="yes" />
          <param name="display_count" value="yes" />
          <param name="language" value="en-US" />
          <param name="filter" value="publish=yes" />
        </object>
      </div>
      <script type="text/javascript">
        var divElement = document.getElementById("viz1713929986552");
        var vizElement = divElement.getElementsByTagName("object")[0];
        vizElement.style.width = "90%";
        vizElement.style.height = 700 + "px";
        var scriptElement = document.createElement("script");
        scriptElement.src =
          "https://public.tableau.com/javascripts/api/viz_v1.js";
        vizElement.parentNode.insertBefore(scriptElement, vizElement);
      </script>
      <p style="color: white; font-size: larger; width: 50%">
        This is a chart of the golfers with the most career PGA Tour Wins.
      </p>
      <div id="chart3"></div>
      <p style="color: white; font-size: larger; width: 50%">
        This chart visualizes annual best average, and the annual worst average
        distance to hole on fairways. It can be noted that over the past twenty
        years, the floor and ceiling in the PGA have not varied very much at
        all.
      </p>
    </main>
  </body>
  <script>
    const width = 800;
    const height = 400;
    const margin = { top: 50, right: 50, bottom: 50, left: 50 };

    const tooltip = d3
      .select("#chart")
      .append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    // Append SVG to the container
    const svg = d3
      .select("#chart")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);

    // Load data (assuming you have a CSV file with years and golf driving averages)
    d3.csv("DrivingAvg(YrlyTop).csv").then((data) => {
      // Convert strings to numbers
      data.forEach((d) => {
        console.log(d);
        d.year = +d.year;
        d.name = d.name;
        d.average = +d.average;
        d.color = d.color;
      });

      // Define scales
      const xScale = d3
        .scaleLinear()
        .domain(d3.extent(data, (d) => d.year))
        .range([0, width]);

      const yScale = d3
        .scaleLinear()
        .domain([250, d3.max(data, (d) => d.average)])
        .range([height, 0]);

      // Define line function
      const line = d3
        .line()
        .x((d) => xScale(d.year))
        .y((d) => yScale(d.average));

      console.log(data);

      // Append circles for data points
      svg
        .selectAll("circle")
        .data(data)
        .enter()
        .append("circle")
        .attr("cx", (d) => xScale(d.year))
        .attr("cy", (d) => yScale(d.average))
        .attr("r", 5)
        .attr("fill", (d) => d.color)
        .on("mouseover", function (event, d) {
          tooltip.transition().duration(200).style("opacity", 0.9);

          tooltip
            .html(
              `Name: ${data[d].name}<br/>Year: ${data[d].year}<br/>Average: ${data[d].average}`
            )
            .style("left", d3.event.pageX + "px")
            .style("top", d3.event.pageY + "px");
        })
        .on("mouseout", function (d) {
          tooltip.transition().duration(500).style("opacity", 0);
        });

      // Append lines connecting the data points
      svg
        .append("path")
        .datum(data)
        .attr("fill", "none")
        .attr("stroke", "steelblue")
        .attr("stroke-width", 2)
        .attr("d", line);

      // Append axes
      svg
        .append("g")
        .attr("transform", `translate(0, ${height})`)
        .call(d3.axisBottom(xScale).tickFormat(d3.format("d")));

      svg.append("g").call(d3.axisLeft(yScale));

      svg
        .append("text")
        .attr("x", width / 2)
        .attr("y", -margin.top / 2)
        .attr("text-anchor", "middle")
        .attr("font-size", "20px")
        .text("Farthest Annual Driving Average Over 30 Years");

      svg
        .append("text")
        .attr("x", width / 2)
        .attr("y", height + margin.bottom - 5)
        .attr("text-anchor", "middle")
        .attr("font-size", "20px")
        .text("Year");

      svg
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("x", -height / 2)
        .attr("y", -margin.left * 0.7)
        .attr("text-anchor", "middle")
        .attr("font-size", "20px")
        .text("Yards");
    });
  </script>
  <script>
    const tooltip2 = d3
      .select("#chart2")
      .append("div")
      .attr("class", "tooltip2")
      .style("opacity", 0);

    // Append SVG to the container
    const svg2 = d3
      .select("#chart2")
      .append("svg")
      .attr("width", width + margin.left + margin.right + 50)
      .attr("height", 500 + margin.top + margin.bottom)
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);

    // Load data (assuming you have a CSV file with years and golf driving averages)
    d3.csv("DrivingAccuracy(Top).csv").then((data) => {
      // Convert strings to numbers
      data.forEach((d) => {
        console.log(d);
        d.year = +d.year;
        d.name = d.name;
        d.accuracy = +d.accuracy;
        d.color = d.color;
      });

      // Find the golfer with the highest accuracy
      const highestAccuracy = d3.max(data, (d) => d.accuracy);
      const highestGolfer = data.find((d) => d.accuracy === highestAccuracy);

      // Define scales
      const xScale = d3
        .scaleLinear()
        .domain([70, highestAccuracy])
        .range([0, width]);

      const yScale = d3
        .scaleBand()
        .domain(data.map((d) => d.year))
        .range([0, 500])
        .padding(0.3);

      // Append bars
      svg2
        .selectAll(".bar")
        .data(data)
        .enter()
        .append("rect")
        .attr("class", "bar")
        .attr("y", (d) => yScale(d.year))
        .attr("height", yScale.bandwidth())
        .attr("x", 0)
        .attr("width", (d) => xScale(d.accuracy))
        .attr("fill", (d) => d.color)
        .on("mouseover", function (event, d) {})
        .on("mouseout", function (d) {
          tooltip2.transition().duration(500).style("opacity", 0);
        });

      // Append text for golfer names (rotated 90 degrees)
      svg2
        .selectAll(".bar-text")
        .data(data)
        .enter()
        .append("text")
        .attr("class", "bar-text")
        .attr("x", (d) => xScale(d.accuracy) + 10) // Adjust the horizontal position as needed
        .attr("y", (d) => yScale(d.year) + yScale.bandwidth() / 2)
        .attr("dy", "0.35em") // Center text vertically
        .text((d) => d.name);

      // Append title
      svg2
        .append("text")
        .attr("x", width / 2)
        .attr("y", -margin.top / 2)
        .attr("text-anchor", "middle")
        .attr("font-size", "20px")
        .text("Highest Annual Driving Accuracy Over 30 Years");

      // Append x axis
      svg2
        .append("g")
        .attr("transform", `translate(0, ${500})`)
        .call(d3.axisBottom(xScale));

      // Append y axis
      svg2
        .append("g")
        .call(d3.axisLeft(yScale))
        .selectAll("text")
        .attr("dy", "0.32em");

      // Append x axis label
      svg2
        .append("text")
        .attr("x", width / 2)
        .attr("y", 500 + margin.bottom - 10)
        .attr("text-anchor", "middle")
        .attr("font-size", "18px")
        .text("Driver Accuracy (Fairways Hit)- Top (800+ Possible)");

      // Append y axis label
      svg2
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("x", -500 / 2)
        .attr("y", -margin.left * 0.8)
        .attr("text-anchor", "middle")
        .attr("font-size", "14px")
        .text("Year");
    });
  </script>
  <script>
    // Define the size of the SVG container

    // Append SVG to the container
    const svg3 = d3
      .select("#chart3")
      .append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", `translate(${margin.left}, ${margin.top})`);
    // Create tooltip
    const tooltip3 = d3
      .select("#chart3")
      .append("div")
      .attr("class", "tooltip")
      .style("opacity", 0);

    // Load data (assuming you have a CSV file with years and distances)
    d3.csv("proximity.csv").then((data) => {
      // Convert strings to numbers
      data.forEach((d) => {
        d.year = +d.year;
        d.best = +d.best;
        d.worst = +d.worst;
      });

      // Define scales
      const xScale = d3
        .scaleLinear()
        .domain([65, d3.max(data, (d) => d.worst + 10)])
        .range([0, width]);

      const yScale = d3
        .scaleBand()
        .domain(data.map((d) => d.year))
        .range([0, height])
        .padding(0.1);

      // Append dumbbells
      svg3
        .selectAll(".dot-best")
        .data(data)
        .enter()
        .append("circle")
        .attr("class", "dot-best")
        .attr("cx", (d) => xScale(d.best))
        .attr("cy", (d) => yScale(d.year))
        .attr("r", 5)
        .attr("fill", "green")
        .on("mouseover", function (d) {
          tooltip3.transition().duration(200).style("opacity", 0.9);
          tooltip3
            .html("Dist:" + d.best)
            .style("left", d3.event.pageX - 70 + "px")
            .style("top", d3.event.pageY - 20 + "px");
        })
        .on("mouseout", function (d) {
          tooltip3.transition().duration(500).style("opacity", 0);
        });

      svg3
        .selectAll(".dot-worst")
        .data(data)
        .enter()
        .append("circle")
        .attr("class", "dot-worst")
        .attr("cx", (d) => xScale(d.worst))
        .attr("cy", (d) => yScale(d.year))
        .attr("r", 5)
        .attr("fill", "red")
        .on("mouseover", function (d) {
          tooltip3.transition().duration(200).style("opacity", 0.9);
          tooltip3
            .html("Dist:" + d.best)
            .style("left", d3.event.pageX + 20 + "px")
            .style("top", d3.event.pageY - 20 + "px");
        })
        .on("mouseout", function (d) {
          tooltip3.transition().duration(500).style("opacity", 0);
        });

      // Append lines connecting best and worst values
      svg3
        .selectAll(".connector")
        .data(data)
        .enter()
        .append("line")
        .attr("class", "connector")
        .attr("x1", (d) => xScale(d.best))
        .attr("y1", (d) => yScale(d.year))
        .attr("x2", (d) => xScale(d.worst))
        .attr("y2", (d) => yScale(d.year))
        .attr("stroke", "black");

      // Append title
      svg3
        .append("text")
        .attr("x", width / 2)
        .attr("y", -margin.top / 2)
        .attr("text-anchor", "middle")
        .attr("font-size", "20px")
        .text("Avg Distance to Hole");

      // Append x axis label
      svg3
        .append("text")
        .attr("x", width / 2)
        .attr("y", height + margin.bottom / 2 + 10)
        .attr("text-anchor", "middle")
        .attr("font-size", "14px")
        .text("Distance (inches)");

      // Append y axis label
      svg3
        .append("text")
        .attr("transform", "rotate(-90)")
        .attr("x", -height / 2)
        .attr("y", -margin.left * 0.8)
        .attr("text-anchor", "middle")
        .attr("font-size", "14px")
        .text("Year");

      // Append x axis
      svg3
        .append("g")
        .attr("transform", `translate(0, ${height})`)
        .call(d3.axisBottom(xScale));

      // Append y axis
      svg3
        .append("g")
        .call(d3.axisLeft(yScale))
        .selectAll("text")
        .attr("dy", "0.32em");
    });
  </script>
</html>
